{"ast":null,"code":"import _slicedToArray from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from'react';import{confirmApplication}from\"../../../api/apiWorker\";import{userInfo}from\"../../../utils/auth\";import Layout from\"../../Layout\";import{useParams}from'react-router-dom';import{showSuccess,showError,showLoading}from'../../../utils/messages';import ApplicationModal from\"./ApplicationModal\";import{getJobAdvertiseDetails}from\"../../../api/apiWorker\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Application=function Application(){var _useParams=useParams(),job_id=_useParams.job_id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),job=_useState4[0],setJob=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),token=_useState12[0],setToken=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),modal=_useState14[0],setModal=_useState14[1];var toggle=function toggle(){return setModal(!modal);};useEffect(function(){var _userInfo=userInfo(),token=_userInfo.token,id=_userInfo.id;setToken(token);setUserId(id);getJobAdvertiseDetails(token,job_id).then(function(res){setJob(res.data);}).catch(function(err){return setError(\"Failed to load the advertised job\");});},[]);var handleClick=function handleClick(){setLoading(true);confirmApplication(token,{job_id:job.id,applicant_id:userId}).then(function(res){setSuccess(true);setLoading(false);toggle();}).catch(function(err){console.log(\"here\");setSuccess(false);setLoading(false);setError(err.message);toggle();});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Layout,{title:\"Apply Job\",className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%'},children:[showLoading(loading),showError(error,\"You have already applied for this job\"),showSuccess(success,\"You have applied for the job\")]}),/*#__PURE__*/_jsx(ApplicationModal,{job:job,toggle:toggle,modal:modal,handleClick:handleClick})]})});};export default Application;","map":{"version":3,"names":["React","useEffect","useState","confirmApplication","userInfo","Layout","useParams","showSuccess","showError","showLoading","ApplicationModal","getJobAdvertiseDetails","Application","job_id","userId","setUserId","job","setJob","error","setError","success","setSuccess","loading","setLoading","token","setToken","modal","setModal","toggle","id","then","res","data","catch","err","handleClick","applicant_id","console","log","message","width"],"sources":["/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/src/components/user/worker/Application.js"],"sourcesContent":["import React from \"react\";\nimport { useEffect, useState } from 'react';\nimport { confirmApplication } from \"../../../api/apiWorker\";\nimport { userInfo } from \"../../../utils/auth\";\nimport Layout from \"../../Layout\";\nimport { useParams } from 'react-router-dom';\nimport { showSuccess, showError, showLoading } from '../../../utils/messages';\nimport ApplicationModal from \"./ApplicationModal\";\nimport { getJobAdvertiseDetails } from \"../../../api/apiWorker\";\n\nconst Application = () => {\n\n    const { job_id } = useParams();\n    const [userId, setUserId] = useState('');\n    const [job, setJob] = useState({});\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [token, setToken] = useState('');\n    const [modal, setModal] = useState(false);\n    const toggle = () => setModal(!modal);\n\n    useEffect(() => {\n        const { token, id } = userInfo();\n        setToken(token);\n        setUserId(id);\n        getJobAdvertiseDetails(token, job_id)\n            .then(res => {\n                setJob(res.data);\n            })\n            .catch(err => setError(\"Failed to load the advertised job\"))\n    }, []);\n\n    const handleClick = () => {\n        setLoading(true);\n        confirmApplication(token, { job_id: job.id, applicant_id: userId })\n            .then(res => {\n                setSuccess(true);\n                setLoading(false);\n                toggle();\n            })\n            .catch(err => {\n                console.log(\"here\");\n                setSuccess(false);\n                setLoading(false);\n                setError(err.message);\n                toggle();\n            })\n    }\n\n    return (\n        <div>\n            <Layout title=\"Apply Job\" className=\"container\">\n                <div style={{ width: '100%' }}>\n                    {showLoading(loading)}\n                    {showError(error, \"You have already applied for this job\")}\n                    {showSuccess(success, \"You have applied for the job\")}\n                </div>\n                <ApplicationModal job={job} toggle={toggle} modal={modal} handleClick={handleClick} />\n            </Layout>\n        </div>\n    )\n}\n\nexport default Application;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}