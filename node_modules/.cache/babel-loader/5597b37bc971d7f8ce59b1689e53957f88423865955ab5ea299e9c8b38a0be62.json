{"ast":null,"code":"import _defineProperty from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Layout from'../Layout';import{showError,showLoading}from'../../utils/messages';import{login}from'../../api/apiAuth';import{Navigate}from\"react-router\";import{authenticate}from'../../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:'',password:'',role:'',error:false,loading:false,disabled:false,redirect:false,success:false};_this.handleChange=function(e){_this.setState(_defineProperty({error:false},e.target.name,e.target.value));};_this.handleSubmit=function(e){e.preventDefault();_this.setState({error:false,loading:true,disabled:true});//this is a axios function\nvar email=_this.state.email;var password=_this.state.password;var role=_this.state.role;console.log(email,password,role);login({email:email,password:password,role:role}).then(function(response){console.log(\"no err\");authenticate(response.data.token,function(){_this.setState({email:'',password:'',role:'',success:true,disabled:false,loading:false,redirect:true,error:false});});}).catch(function(err){console.log(\"here\");var errMsg='Something went wrong';if(err.response){errMsg=err.response.data;}_this.setState({error:errMsg,disabled:false,loading:false});});};_this.redirectUser=function(){if(_this.state.redirect){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}};_this.signInForm=function(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:_this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",className:\"form-control\",value:_this.state.email,required:true,onChange:_this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",className:\"form-control\",value:_this.state.password,required:true,onChange:_this.handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Log in as:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",name:\"role\",type:\"radio\",value:\"worker\",required:true,onClick:_this.handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"I am a worker.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",name:\"role\",type:\"radio\",value:\"client\",required:true,onClick:_this.handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"I am a client.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-primary\",disabled:_this.state.disabled,children:\"Login\"})]});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Layout,{title:\"Login\",className:\"container col-md-8 offset-md-2\",children:[this.redirectUser(),showLoading(this.state.loading),showError(this.state.error,this.state.error),/*#__PURE__*/_jsx(\"h3\",{children:\"Login Here,\"}),/*#__PURE__*/_jsx(\"hr\",{}),this.signInForm(),/*#__PURE__*/_jsx(\"hr\",{})]});}}]);return Login;}(Component);export default Login;","map":{"version":3,"names":["React","Component","Layout","showError","showLoading","login","Navigate","authenticate","Login","state","email","password","role","error","loading","disabled","redirect","success","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","console","log","then","response","data","token","catch","err","errMsg","redirectUser","signInForm"],"sources":["/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/src/components/user/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport Layout from '../Layout';\nimport { showError, showLoading } from '../../utils/messages';\nimport { login } from '../../api/apiAuth';\nimport { Navigate } from \"react-router\";\nimport { authenticate } from '../../utils/auth';\n\nclass Login extends Component {\n    state = {\n        email: '',\n        password: '',\n        role: '',\n        error: false,\n        loading: false,\n        disabled: false,\n        redirect: false,\n        success: false\n\n    }\n    handleChange = e => {\n        this.setState({\n            error: false,\n            [e.target.name]: e.target.value\n        })\n    }\n    handleSubmit = e => {\n        e.preventDefault();\n        this.setState({\n            error: false,\n            loading: true,\n            disabled: true\n        });\n\n        //this is a axios function\n        let email = this.state.email;\n        let password = this.state.password;\n        let role = this.state.role;\n        console.log(email, password, role);\n        login({\n            email,\n            password,\n            role\n        }).then(response => {\n            console.log(\"no err\");\n            authenticate(response.data.token, () => {\n                this.setState({\n                    email: '',\n                    password: '',\n                    role: '',\n                    success: true,\n                    disabled: false,\n                    loading: false,\n                    redirect: true,\n                    error: false\n                })\n            })\n        }).catch(err => {\n            console.log(\"here\");\n            let errMsg = 'Something went wrong';\n            if (err.response) {\n                errMsg = err.response.data;\n            }\n            this.setState({\n                error: errMsg,\n                disabled: false,\n                loading: false\n            })\n        })\n    }\n    redirectUser = () => {\n        if (this.state.redirect) {\n            return (<Navigate to='/' />)\n        }\n    }\n\n    signInForm = () => (\n        <form onSubmit={this.handleSubmit}>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email:</label>\n                <input name='email' type=\"email\" className=\"form-control\"\n                    value={this.state.email} required onChange={this.handleChange} />\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password:</label>\n                <input name=\"password\" type=\"password\" className=\"form-control\"\n                    value={this.state.password} required onChange={this.handleChange} />\n            </div>\n            <div className='form-group'>\n                <label className=\"text-muted\">Log in as:</label>\n            </div>\n            <div className=\"form-check\">\n                <input className=\"form-check-input\" name=\"role\" type=\"radio\" value='worker' required onClick={this.handleChange} />\n                <label className=\"form-check-label\">\n                    I am a worker.\n                </label><br />\n                <input className=\"form-check-input\" name=\"role\" type=\"radio\" value='client' required onClick={this.handleChange} />\n                <label className=\"form-check-label\" >\n                    I am a client.\n                </label>\n            </div>\n            <button type=\"submit\" className=\"btn btn-outline-primary\" disabled={this.state.disabled}>Login</button>\n        </form>\n    );\n\n    render() {\n        return (\n            <Layout title=\"Login\" className=\"container col-md-8 offset-md-2\">\n                {this.redirectUser()}\n                {showLoading(this.state.loading)}\n                {showError(this.state.error, this.state.error)}\n                <h3>Login Here,</h3>\n                <hr />\n                {this.signInForm()}\n                <hr />\n            </Layout>\n        );\n    }\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}