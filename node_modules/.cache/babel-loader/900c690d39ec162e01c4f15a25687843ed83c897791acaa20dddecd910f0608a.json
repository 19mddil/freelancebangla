{"ast":null,"code":"import _regeneratorRuntime from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{userInfo}from\"../../../utils/auth\";import{loadJobApplicantsByJobId,selectWorkersApplication,rejectWorkerApplication}from\"../../../api/apiClient\";import Layout from\"../../Layout\";import{ListGroup,ListGroupItem,Button}from\"reactstrap\";import{Link}from\"react-router-dom\";import{showLoading,showSuccess,showError}from\"../../../utils/messages\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoadJobApplicantsByJobId=function LoadJobApplicantsByJobId(){var _useParams=useParams(),job_id=_useParams.job_id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),tkn=_useState2[0],setTkn=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),workerId=_useState4[0],setWorkerId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),resData=_useState6[0],setResData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),rejected=_useState8[0],setRejected=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];useEffect(function(){var _userInfo=userInfo(),token=_userInfo.token,id=_userInfo.id;setWorkerId(id);setTkn(token);loadJobApplicantsByJobId(token,job_id,id).then(function(res){console.log(res.data);setResData(res.data);}).catch(function(err){});},[]);var handleSelect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(applicationId){var _userInfo2,token,id,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_userInfo2=userInfo(),token=_userInfo2.token,id=_userInfo2.id;setLoading(true);setSuccess(false);_context.prev=3;_context.next=6;return selectWorkersApplication(tkn,{selected_application_id:applicationId});case 6:_context.next=8;return loadJobApplicantsByJobId(token,job_id,id);case 8:res=_context.sent;setResData(res.data);setLoading(false);setSuccess(true);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);setError(\"Couldn't do that\");case 17:case\"end\":return _context.stop();}},_callee,null,[[3,14]]);}));return function handleSelect(_x){return _ref.apply(this,arguments);};}();var handleReject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(applicationId){var _userInfo3,token,id,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_userInfo3=userInfo(),token=_userInfo3.token,id=_userInfo3.id;setLoading(true);setSuccess(false);_context2.prev=3;_context2.next=6;return rejectWorkerApplication(tkn,{rejected_application_id:applicationId});case 6:_context2.next=8;return loadJobApplicantsByJobId(token,job_id,id);case 8:res=_context2.sent;setResData(res.data);setLoading(false);setSuccess(true);_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](3);setError(\"Couldn't do that\");case 17:case\"end\":return _context2.stop();}},_callee2,null,[[3,14]]);}));return function handleReject(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Layout,{title:\"Job Applicants\",className:\"container\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Select,Reject, if selected insert to a new Table\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%'},children:[showLoading(loading),showError(error,\"You have already applied for this job\"),showSuccess(success,\"It is done\")]}),/*#__PURE__*/_jsx(ListGroup,{children:resData&&resData.map(function(data){return/*#__PURE__*/_jsxs(ListGroupItem,{children:[/*#__PURE__*/_jsx(Link,{children:data.email}),/*#__PURE__*/_jsx(Button,{color:\"danger\",size:\"sm\",style:{margin:\"1%\",float:\"right\"},disabled:data.selected==='false'&&data.rejected==='false'?false:data.selected==='true'&&data.rejected==='false'?false:true,onClick:function onClick(){return handleReject(data.application_id);},children:data.rejected==='true'&&data.selected==='false'?'Rejected':'Reject'}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleSelect(data.application_id);},disabled:data.selected==='false'&&data.rejected==='false'?false:data.rejected==='true'&&data.selected==='false'?false:true,color:\"success\",size:\"sm\",style:{margin:\"1%\",float:\"right\"},children:data.selected==='true'&&data.rejected==='false'?'Selected':'Select'})]});})})]})});};export default LoadJobApplicantsByJobId;","map":{"version":3,"names":["React","useEffect","useState","useParams","userInfo","loadJobApplicantsByJobId","selectWorkersApplication","rejectWorkerApplication","Layout","ListGroup","ListGroupItem","Button","Link","showLoading","showSuccess","showError","LoadJobApplicantsByJobId","job_id","tkn","setTkn","workerId","setWorkerId","resData","setResData","rejected","setRejected","success","setSuccess","loading","setLoading","error","setError","token","id","then","res","console","log","data","catch","err","handleSelect","applicationId","selected_application_id","handleReject","rejected_application_id","width","map","email","margin","float","selected","application_id"],"sources":["/home/mddil/Desktop/projects/FREELANCEBANGLA-PRODUCTION/src/components/user/client/LoadJobApplicantsByJobId.js"],"sourcesContent":["import React from \"react\";\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { userInfo } from \"../../../utils/auth\";\nimport { loadJobApplicantsByJobId, selectWorkersApplication, rejectWorkerApplication } from \"../../../api/apiClient\";\nimport Layout from \"../../Layout\";\nimport { ListGroup, ListGroupItem, Button } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport { showLoading, showSuccess, showError } from \"../../../utils/messages\";\n\nconst LoadJobApplicantsByJobId = () => {\n    const { job_id } = useParams();\n    const [tkn, setTkn] = useState('');\n    const [workerId, setWorkerId] = useState('');\n    const [resData, setResData] = useState(null);\n    const [rejected, setRejected] = useState(false);\n    const [success, setSuccess] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n\n\n\n    useEffect(() => {\n        const { token, id } = userInfo();\n        setWorkerId(id);\n        setTkn(token);\n        loadJobApplicantsByJobId(token, job_id, id)\n            .then(res => {\n                console.log(res.data);\n                setResData(res.data);\n            })\n            .catch(err => { })\n    }, []);\n\n    const handleSelect = async (applicationId) => {\n\n        const { token, id } = userInfo();\n        setLoading(true);\n        setSuccess(false);\n        try {\n            await selectWorkersApplication(tkn, {\n                selected_application_id: applicationId,\n            })\n            const res = await loadJobApplicantsByJobId(token, job_id, id);\n            setResData(res.data);\n            setLoading(false);\n            setSuccess(true);\n        } catch (err) {\n            setError(\"Couldn't do that\");\n        }\n\n\n    }\n\n    const handleReject = async (applicationId) => {\n        const { token, id } = userInfo();\n        setLoading(true);\n        setSuccess(false);\n        try {\n            await rejectWorkerApplication(tkn, {\n                rejected_application_id: applicationId,\n            })\n            const res = await loadJobApplicantsByJobId(token, job_id, id);\n            setResData(res.data);\n            setLoading(false);\n            setSuccess(true);\n        } catch (err) {\n            setError(\"Couldn't do that\");\n        }\n\n    }\n    return (\n        <div>\n            <Layout title=\"Job Applicants\" className=\"container\">\n                <h5>Select,Reject, if selected insert to a new Table</h5>\n                <div style={{ width: '100%' }}>\n                    {showLoading(loading)}\n                    {showError(error, \"You have already applied for this job\")}\n                    {showSuccess(success, \"It is done\")}\n                </div>\n                <ListGroup>\n                    {resData && resData.map(data =>\n                    (<ListGroupItem>\n                        <Link>{data.email}</Link>\n                        <Button\n                            color=\"danger\" size=\"sm\" style={{ margin: \"1%\", float: \"right\" }}\n                            disabled={data.selected === 'false' && data.rejected === 'false' ? false : (data.selected === 'true' && data.rejected === 'false' ? false : true)}\n                            onClick={() => handleReject(data.application_id)}>\n\n                            {data.rejected === 'true' && data.selected === 'false' ? 'Rejected' : 'Reject'}\n\n                        </Button>\n                        <Button\n                            onClick={() => handleSelect(data.application_id)}\n                            disabled={data.selected === 'false' && data.rejected === 'false' ? false : (data.rejected === 'true' && data.selected === 'false' ? false : true)}\n                            color=\"success\" size=\"sm\" style={{ margin: \"1%\", float: \"right\" }} >\n\n                            {data.selected === 'true' && data.rejected === 'false' ? 'Selected' : 'Select'}\n\n                        </Button>\n                    </ListGroupItem>)\n                    )}\n                </ListGroup>\n            </Layout>\n        </div>\n    )\n}\n\nexport default LoadJobApplicantsByJobId;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}