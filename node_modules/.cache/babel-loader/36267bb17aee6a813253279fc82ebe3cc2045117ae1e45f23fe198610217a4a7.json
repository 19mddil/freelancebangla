{"ast":null,"code":"var _jsxFileName = \"/home/mddil/Desktop/projects/freelancebangla/frontend/src/components/user/Login.js\";\nimport React, { Component } from 'react';\nimport Layout from '../Layout';\nimport { showError, showLoading } from '../../utils/messages';\nimport { login } from '../../api/apiAuth';\nimport { Navigate } from \"react-router\";\nimport { authenticate } from '../../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      email: '',\n      password: '',\n      role: '',\n      error: false,\n      loading: false,\n      disabled: false,\n      redirect: false,\n      success: false\n    };\n    this.handleChange = e => {\n      this.setState({\n        error: false,\n        [e.target.name]: e.target.value\n      });\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        error: false,\n        loading: true,\n        disabled: true\n      });\n\n      //this is a axios function\n      let email = this.state.email;\n      let password = this.state.password;\n      let role = this.state.role;\n      login({\n        email,\n        password,\n        role\n      }).then(response => {\n        authenticate(response.data.token, () => {\n          this.setState({\n            email: '',\n            password: '',\n            role: '',\n            success: true,\n            disabled: false,\n            loading: false,\n            redirect: true,\n            error: false\n          });\n        });\n      }).catch(err => {\n        let errMsg = 'Something went wrong';\n        if (err.response) {\n          errMsg = err.response.data;\n        }\n        this.setState({\n          error: errMsg,\n          disabled: false,\n          loading: false\n        });\n      });\n    };\n    this.redirectUser = () => {\n      if (this.state.redirect) {\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this);\n      }\n    };\n    this.signInForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          type: \"email\",\n          className: \"form-control\",\n          value: this.state.email,\n          required: true,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          type: \"password\",\n          className: \"form-control\",\n          value: this.state.password,\n          required: true,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Log in as:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-check-input\",\n          type: \"radio\",\n          id: \"flexRadioDefault1\",\n          value: this.state.role,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          for: \"flexRadioDefault1\",\n          children: \"I am a worker.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-check-input\",\n          type: \"radio\",\n          id: \"flexRadioDefault2\",\n          value: this.state.role,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          for: \"flexRadioDefault2\",\n          children: \"I am a client.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-outline-primary\",\n        disabled: this.state.disabled,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this);\n  }\n  componentDidMount() {\n    console.log(email, password, role);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      title: \"Login\",\n      className: \"container col-md-8 offset-md-2\",\n      children: [this.redirectUser(), showLoading(this.state.loading), showError(this.state.error, this.state.error), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login Here,\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), this.signInForm(), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default Login;","map":{"version":3,"names":["React","Component","Layout","showError","showLoading","login","Navigate","authenticate","Login","state","email","password","role","error","loading","disabled","redirect","success","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","then","response","data","token","catch","err","errMsg","redirectUser","signInForm","componentDidMount","console","log","render"],"sources":["/home/mddil/Desktop/projects/freelancebangla/frontend/src/components/user/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport Layout from '../Layout';\nimport { showError, showLoading } from '../../utils/messages';\nimport { login } from '../../api/apiAuth';\nimport { Navigate } from \"react-router\";\nimport { authenticate } from '../../utils/auth';\n\nclass Login extends Component {\n    state = {\n        email: '',\n        password: '',\n        role: '',\n        error: false,\n        loading: false,\n        disabled: false,\n        redirect: false,\n        success: false\n\n    }\n    handleChange = e => {\n        this.setState({\n            error: false,\n            [e.target.name]: e.target.value\n        })\n    }\n    componentDidMount() {\n        console.log(email, password, role);\n    }\n    handleSubmit = e => {\n        e.preventDefault();\n        this.setState({\n            error: false,\n            loading: true,\n            disabled: true\n        });\n\n        //this is a axios function\n        let email = this.state.email;\n        let password = this.state.password;\n        let role = this.state.role;\n        login({\n            email,\n            password,\n            role\n        }\n\n        ).then(response => {\n            authenticate(response.data.token, () => {\n                this.setState({\n                    email: '',\n                    password: '',\n                    role: '',\n                    success: true,\n                    disabled: false,\n                    loading: false,\n                    redirect: true,\n                    error: false\n                })\n            })\n        }).catch(err => {\n            let errMsg = 'Something went wrong';\n            if (err.response) {\n                errMsg = err.response.data;\n            }\n            this.setState({\n                error: errMsg,\n                disabled: false,\n                loading: false\n            })\n        })\n    }\n    redirectUser = () => {\n        if (this.state.redirect) {\n            return (<Navigate to='/' />)\n        }\n    }\n\n    signInForm = () => (\n        <form onSubmit={this.handleSubmit}>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email:</label>\n                <input name='email' type=\"email\" className=\"form-control\"\n                    value={this.state.email} required onChange={this.handleChange} />\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password:</label>\n                <input name=\"password\" type=\"password\" className=\"form-control\"\n                    value={this.state.password} required onChange={this.handleChange} />\n            </div>\n            <div className='form-group'>\n                <label className=\"text-muted\">Log in as:</label>\n            </div>\n            <div className=\"form-check\">\n                <input className=\"form-check-input\" type=\"radio\" id=\"flexRadioDefault1\" value={this.state.role} onChange={this.handleChange} />\n                <label className=\"form-check-label\" for=\"flexRadioDefault1\">\n                    I am a worker.\n                </label>\n            </div>\n            <div className=\"form-check\">\n                <input className=\"form-check-input\" type=\"radio\" id=\"flexRadioDefault2\" value={this.state.role} onChange={this.handleChange} />\n                <label className=\"form-check-label\" for=\"flexRadioDefault2\">\n                    I am a client.\n                </label>\n            </div>\n            <button type=\"submit\" className=\"btn btn-outline-primary\" disabled={this.state.disabled}>Login</button>\n        </form>\n    );\n\n    render() {\n        return (\n            <Layout title=\"Login\" className=\"container col-md-8 offset-md-2\">\n                {this.redirectUser()}\n                {showLoading(this.state.loading)}\n                {showError(this.state.error, this.state.error)}\n                <h3>Login Here,</h3>\n                <hr />\n                {this.signInForm()}\n                <hr />\n            </Layout>\n        );\n    }\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}